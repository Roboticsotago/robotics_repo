#N canvas 2 123 1905 987 10;
#X floatatom 102 68 5 0 0 0 - - -, f 5;
#X obj 105 91 hsl 64 15 -35 35 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 0 1;
#X obj 691 105 tgl 50 0 empty empty ball_near 17 7 0 10 -262144 -1
-1 1 1;
#X obj 215 46 < 20;
#X obj 74 167 sig~;
#X obj 71 203 *~;
#X obj 71 257 throw~ steering;
#X obj 690 53 r ball_distance;
#X obj 217 67 tgl 50 0 empty empty facing_ball 17 7 0 10 -262144 -1
-1 1 1;
#X obj 856 54 r compass_heading;
#X obj 856 76 abs;
#X obj 856 98 < 70;
#N canvas 872 460 893 540 differential_drive 0;
#X obj 281 525 vsl 15 100 -1 1 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 5940 1;
#X obj 362 519 vsl 15 100 -1 1 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 5940 1;
#X obj 345 194 vsl 15 100 -1 1 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 5940 1;
#X obj 304 352 hsl 100 15 -1 1 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 4950 1;
#X obj 286 472 +;
#X obj 362 472 +;
#X floatatom 344 326 5 0 0 0 - - -, f 5;
#X obj 286 494 clip -1 1;
#X obj 315 442 t b f;
#X obj 375 411 * -1;
#X obj 375 442 t b f;
#X obj 362 494 clip -1 1;
#X floatatom 246 384 5 0 0 0 - - -, f 5;
#X obj 220 686 s left_speed;
#X obj 370 684 s right_speed;
#X text -7 20 forward/ backwards;
#X text 874 19 left/right;
#X obj 963 117 inlet;
#X text 910 92 steering toggle;
#X obj 379 101 sig2num~;
#X obj 26 46 inlet~;
#X obj 553 150 sig2num~;
#X obj 459 25 hsl 128 15 10 2000 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 64 1;
#X obj 842 49 inlet~;
#X obj 291 9 loadbang;
#X msg 296 32 20;
#X obj 704 117 *~;
#X obj 205 10 inlet;
#X obj 133 74 *~;
#X obj 204 116 tgl 50 1 steering_toggle_out steering_toggle_in empty
17 7 0 10 -262144 -1 -1 1 1;
#X obj 963 139 s steering_toggle_in;
#X obj 966 186 r steering_toggle_out;
#X obj 142 30 s throttle_toggle_in;
#X obj 119 120 tgl 50 1 throttle_toggle_out throttle_toggle_in empty
17 7 0 10 -262144 -1 -1 1 1;
#X obj 182 55 r throttle_toggle_out;
#X obj 201 228 hsl 60 15 -1 1 0 0 empty steering_drive empty -2 -8
0 10 -262144 -1 -1 2950 1;
#X obj 137 205 vsl 15 60 -1 1 0 0 empty throttle_drive empty 0 -9 0
10 -262144 -1 -1 3540 1;
#X obj 398 197 s throttle_drive;
#X obj 574 278 s steering_drive;
#X floatatom 471 73 5 0 0 0 - - -, f 5;
#X obj 257 638 change;
#X obj 365 637 change;
#X connect 0 0 40 0;
#X connect 1 0 41 0;
#X connect 2 0 6 0;
#X connect 3 0 8 0;
#X connect 3 0 9 0;
#X connect 3 0 12 0;
#X connect 4 0 7 0;
#X connect 5 0 11 0;
#X connect 6 0 4 0;
#X connect 6 0 5 0;
#X connect 7 0 0 0;
#X connect 8 0 4 0;
#X connect 8 1 4 1;
#X connect 9 0 10 0;
#X connect 10 0 5 0;
#X connect 10 1 5 1;
#X connect 11 0 1 0;
#X connect 17 0 30 0;
#X connect 19 0 2 0;
#X connect 19 0 37 0;
#X connect 20 0 28 0;
#X connect 21 0 3 0;
#X connect 21 0 38 0;
#X connect 22 0 19 1;
#X connect 22 0 21 1;
#X connect 22 0 39 0;
#X connect 23 0 26 0;
#X connect 24 0 25 0;
#X connect 25 0 22 0;
#X connect 26 0 21 0;
#X connect 27 0 32 0;
#X connect 28 0 19 0;
#X connect 31 0 26 1;
#X connect 34 0 28 1;
#X connect 40 0 13 0;
#X connect 41 0 14 0;
#X coords 0 -1 1 1 170 200 1 100 100;
#X restore 81 651 pd differential_drive;
#X obj 212 610 catch~ steering;
#X obj 850 120 tgl 50 0 empty empty facing_enemy_goal 17 7 0 10 -262144
-1 -1 1 1;
#N canvas 101 51 895 549 kick? 0;
#X obj 87 154 change;
#X obj 48 263 s kick;
#X obj 87 132 snapshot~;
#X obj 212 83 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 212 57 loadbang;
#X text 88 17 toggles kicker;
#X obj 212 107 metro 10;
#X obj 88 44 inlet~;
#X floatatom 154 153 5 0 0 0 - - -, f 5;
#X floatatom 147 179 5 0 0 0 - - -, f 5;
#X obj 88 77 lop~ 1;
#X obj 87 105 expr~ $v1 >= 0.5;
#X obj 48 207 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 48 185 metro 170;
#X obj 48 243 spigot;
#X obj 87 208 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 14 140 loadbang;
#X obj 48 164 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X connect 0 0 9 0;
#X connect 0 0 15 0;
#X connect 2 0 0 0;
#X connect 2 0 8 0;
#X connect 3 0 6 0;
#X connect 4 0 3 0;
#X connect 6 0 2 0;
#X connect 7 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 2 0;
#X connect 12 0 14 0;
#X connect 13 0 12 0;
#X connect 14 0 1 0;
#X connect 15 0 14 1;
#X connect 16 0 17 0;
#X connect 17 0 13 0;
#X restore 1148 302 pd kick?;
#X obj 1718 54 r ball_detected;
#X obj 1037 51 r angle2goal;
#X obj 1586 53 r range;
#X obj 1040 77 abs;
#X obj 990 125 tgl 50 0 empty empty Facing_Goal 17 7 0 10 -262144 -1
-1 1 1;
#X obj 690 177 sig~;
#X obj 850 175 sig~;
#X obj 990 180 sig~;
#X text 1040 23 Vision:;
#X text 692 28 IR:;
#X text 71 15 IR:;
#X text 860 33 Compass:;
#X text 1721 28 IR:;
#X text 1589 25 Ultrasound:;
#N canvas 101 51 895 549 serial-connection 0;
#X obj 223 184 s motor_device;
#X text 216 68 Tell motor-control what serial device to use:;
#X obj 223 90 loadbang;
#X obj 223 112 delay 50;
#X msg 223 136 devicename /dev/serial/by-id/usb-DSpace__www.dspace.org.nz__DSpace_Robot_2.0_55234313335351503221-if00
;
#X obj 116 90 r reconnect;
#X obj 108 119 bng 15 250 50 0 empty empty Connect 17 7 0 10 -262144
-1 -1;
#X msg 128 190 close;
#X obj 108 140 bng 15 250 50 0 empty empty disconnect 17 7 0 10 -262144
-1 -1;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 0 0;
#X connect 5 0 6 0;
#X connect 6 0 4 0;
#X connect 7 0 0 0;
#X connect 8 0 7 0;
#X coords 0 -1 1 1 85 60 1 100 100;
#X restore 390 768 pd serial-connection;
#X obj 1149 51 r compass_heading;
#X obj 1291 52 r ball_angle;
#X obj 1151 94 * -1;
#X obj 1229 133 +;
#X obj 1274 74 t b f;
#X obj 1222 164 abs;
#X obj 1222 182 < 90;
#X obj 1283 122 tgl 50 0 empty empty ball_between_us_and_goal 17 7
0 10 -262144 -1 -1 1 1;
#X obj 1480 798 sig2num~;
#X obj 1577 406 r angle2goal;
#X obj 1578 450 < 10;
#X obj 1577 428 abs;
#X obj 1619 430 tgl 50 0 empty empty facing_goal 17 7 0 10 -262144
-1 -1 1 1;
#X obj 1587 515 r ball_near;
#X text 99 5 controlling steering while shooting for the goal., f
29;
#X obj 1138 331 s~ shoot_mode;
#X obj 116 137 r~ shoot_mode;
#X obj 116 163 sig2num~;
#X obj 1222 204 sig~;
#X text 1165 11 Compass: detirmines whether the ball is between us
and the goal, f 30;
#X obj 1715 83 tgl 50 0 empty empty ball_detected 17 7 0 10 -262144
-1 -1 1 1;
#X obj 69 39 r angle2goal;
#X obj 72 138 / 35;
#X obj 1042 100 < 15;
#N canvas 423 341 594 357 diy_pwm 0;
#X obj 142 119 phasor~ 0.85;
#X obj 218 193 snapshot~;
#X obj 338 123 loadbang;
#X obj 281 161 metro 100;
#X obj 262 130 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 203 264 outlet;
#X floatatom 218 215 5 0 0 0 - - -, f 5;
#X obj 142 141 expr~ $v1 < 0.05;
#X connect 0 0 7 0;
#X connect 1 0 6 0;
#X connect 2 0 4 0;
#X connect 3 0 1 0;
#X connect 4 0 3 0;
#X connect 6 0 5 0;
#X connect 7 0 1 0;
#X restore 120 231 pd diy_pwm;
#X obj 72 230 *~;
#X obj 691 80 < 2;
#X obj 1138 274 expr~ $v1 * $v2 * $v3 * $v4 * $v5;
#X obj 1432 16 r ball_angle;
#X obj 1432 38 abs;
#X obj 1432 60 < 45;
#X obj 1467 121 tgl 50 0 empty empty facing_ball 17 7 0 10 -262144
-1 -1 1 1;
#X obj 1432 209 sig~;
#X obj 207 165 tgl 75 0 empty empty shoot_mode 17 7 0 10 -262144 -1
-1 1 1;
#X text 89 358 Seek mode:;
#X text 167 359 running: when not in shoot mode \, and when ball isn't
between robot and the goal., f 38;
#X obj 104 406 r~ shoot_mode;
#X obj 116 137 r~ shoot_mode;
#X obj 212 293 throw~ throttle;
#X floatatom 1587 78 5 0 0 0 - - -, f 5;
#X obj 1587 97 moses 0;
#X obj 1583 145 tgl 50 0 empty empty way_is_clear 17 7 0 10 -262144
-1 -1 1 1;
#X obj 282 246 r way_is_clear;
#X obj 1582 200 s way_is_clear;
#X obj 213 274 *~;
#X obj 71 610 catch~ throttle;
#X obj 1583 119 > 16;
#X obj 213 252 *~ 0.2;
#X connect 0 0 1 0;
#X connect 2 0 21 0;
#X connect 3 0 8 0;
#X connect 4 0 5 0;
#X connect 5 0 56 0;
#X connect 7 0 57 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 14 0;
#X connect 13 0 12 2;
#X connect 14 0 22 0;
#X connect 16 0 51 0;
#X connect 17 0 19 0;
#X connect 18 0 70 0;
#X connect 19 0 54 0;
#X connect 20 0 23 0;
#X connect 21 0 58 0;
#X connect 22 0 58 1;
#X connect 23 0 58 2;
#X connect 31 0 33 0;
#X connect 32 0 35 0;
#X connect 33 0 34 0;
#X connect 34 0 36 0;
#X connect 35 0 34 0;
#X connect 35 1 34 1;
#X connect 36 0 37 0;
#X connect 37 0 38 0;
#X connect 37 0 49 0;
#X connect 40 0 42 0;
#X connect 41 0 43 0;
#X connect 42 0 41 0;
#X connect 47 0 48 0;
#X connect 47 0 5 1;
#X connect 47 0 78 0;
#X connect 48 0 64 0;
#X connect 49 0 58 3;
#X connect 52 0 3 0;
#X connect 52 0 53 0;
#X connect 53 0 4 0;
#X connect 54 0 20 0;
#X connect 55 0 56 1;
#X connect 56 0 6 0;
#X connect 57 0 2 0;
#X connect 58 0 15 0;
#X connect 58 0 46 0;
#X connect 59 0 60 0;
#X connect 60 0 61 0;
#X connect 61 0 62 0;
#X connect 61 0 63 0;
#X connect 63 0 58 4;
#X connect 70 0 71 0;
#X connect 71 1 77 0;
#X connect 72 0 74 0;
#X connect 73 0 75 1;
#X connect 75 0 69 0;
#X connect 76 0 12 0;
#X connect 77 0 72 0;
#X connect 78 0 75 0;
