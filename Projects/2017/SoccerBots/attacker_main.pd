#N canvas 31 99 1166 628 10;
#N canvas 18 74 952 540 differential_drive 0;
#X obj 310 220 vsl 15 100 -1 1 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 4950 1;
#X obj 390 228 vsl 15 100 -1 1 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 4950 1;
#X obj 314 140 +;
#X obj 390 140 +;
#X obj 314 162 clip -1 1;
#X obj 343 110 t b f;
#X obj 403 79 * -1;
#X obj 403 110 t b f;
#X obj 390 162 clip -1 1;
#X obj 251 340 s left_speed;
#X obj 398 343 s right_speed;
#X text 169 -144 forward/ backwards;
#X text 477 -146 left/right;
#X obj 616 -130 inlet;
#X text 563 -155 steering toggle;
#X obj 190 -119 inlet~;
#X obj 690 215 hsl 128 15 10 2000 0 0 empty empty empty -2 -8 0 10
-262144 -1 -1 64 1;
#X obj 487 -124 inlet~;
#X obj 643 173 loadbang;
#X msg 648 196 20;
#X obj 490 -67 *~;
#X obj 256 -121 inlet;
#X obj 190 -67 *~;
#X obj 204 116 tgl 50 1 steering_toggle_out steering_toggle_in empty
17 7 0 10 -262144 -1 -1 1 1;
#X obj 621 -75 s steering_toggle_in;
#X obj 617 -51 r steering_toggle_out;
#X obj 243 -99 s throttle_toggle_in;
#X obj 119 120 tgl 50 1 throttle_toggle_out throttle_toggle_in empty
17 7 0 10 -262144 -1 -1 1 1;
#X obj 242 -73 r throttle_toggle_out;
#X obj 201 228 hsl 60 15 -1 1 0 0 empty steering_drive empty -2 -8
0 10 -262144 -1 -1 2950 1;
#X obj 137 205 vsl 15 60 -1 1 0 0 empty throttle_drive empty 0 -9 0
10 -262144 -1 -1 2950 1;
#X obj 190 46 s throttle_drive;
#X obj 491 48 s steering_drive;
#X floatatom 688 195 5 0 0 0 - - -, f 5;
#X obj 191 -43 lop~ 10;
#X obj 492 -44 lop~ 10;
#X obj 654 241 s sampling_period;
#X obj 254 -48 r sampling_period;
#X obj 610 -30 r sampling_period;
#X obj 194 -23 sig2num~;
#X obj 494 -20 sig2num~;
#X obj 340 191 * 0.6;
#X obj 406 195 * 0.6;
#X connect 0 0 9 0;
#X connect 1 0 10 0;
#X connect 2 0 4 0;
#X connect 3 0 8 0;
#X connect 4 0 41 0;
#X connect 5 0 2 0;
#X connect 5 1 2 1;
#X connect 6 0 7 0;
#X connect 7 0 3 0;
#X connect 7 1 3 1;
#X connect 8 0 42 0;
#X connect 13 0 24 0;
#X connect 15 0 22 0;
#X connect 16 0 33 0;
#X connect 16 0 36 0;
#X connect 17 0 20 0;
#X connect 18 0 19 0;
#X connect 19 0 16 0;
#X connect 20 0 35 0;
#X connect 21 0 26 0;
#X connect 22 0 34 0;
#X connect 25 0 20 1;
#X connect 28 0 22 1;
#X connect 34 0 39 0;
#X connect 35 0 40 0;
#X connect 37 0 39 1;
#X connect 38 0 40 1;
#X connect 39 0 31 0;
#X connect 39 0 2 0;
#X connect 39 0 3 0;
#X connect 40 0 32 0;
#X connect 40 0 6 0;
#X connect 40 0 5 0;
#X connect 41 0 0 0;
#X connect 42 0 1 0;
#X coords 0 -1 1 1 170 200 1 100 100;
#X restore 13 229 pd differential_drive;
#X obj 120 201 catch~ steering;
#N canvas 99 65 895 549 serial-connection 0;
#X obj 223 184 s motor_device;
#X text 216 68 Tell motor-control what serial device to use:;
#X obj 223 90 loadbang;
#X obj 223 112 delay 50;
#X msg 223 136 devicename /dev/serial/by-id/usb-DSpace__www.dspace.org.nz__DSpace_Robot_2.0_55234313335351503221-if00
;
#X obj 116 90 r reconnect;
#X obj 108 119 bng 15 250 50 0 empty empty Connect 17 7 0 10 -262144
-1 -1;
#X msg 128 190 close;
#X obj 108 140 bng 15 250 50 0 empty empty disconnect 17 7 0 10 -262144
-1 -1;
#X text 202 229 TODO: consider using the hostname message to set this.
Actually \, since the two robots will have different control patches
anyway \, this will work perfectly well.;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 0 0;
#X connect 5 0 6 0;
#X connect 6 0 4 0;
#X connect 7 0 0 0;
#X connect 8 0 7 0;
#X coords 0 -1 1 1 85 60 1 100 100;
#X restore 24 443 pd serial-connection;
#X obj 12 201 catch~ throttle;
#N canvas 33 95 1265 628 seek 0;
#X obj 119 105 tgl 50 0 empty empty SEEK 46 7 0 30 -262144 -1 -1 0
1;
#X obj 362 62 r ball_side;
#X obj 362 84 not;
#X obj 430 215 sig~;
#X obj 430 237 s~ seek_mode;
#X obj 114 55 r~ seek_mode;
#X obj 114 77 sig2num~;
#X text 345 19 When to activate seek mode;
#X obj 471 110 t b f;
#X obj 847 270 r ball_angle;
#X obj 759 447 throw~ steering;
#X obj 905 446 throw~ throttle;
#X text 835 239 Follow the ball;
#X obj 799 325 r~ seek_mode;
#X obj 759 403 *~;
#X obj 563 324 sig~;
#X obj 905 402 *~;
#X obj 905 323 sig~;
#X obj 407 139 *;
#X obj 905 301 expr if(-27<=$f1<=27 \, 0.6 \, 0);
#X floatatom 486 149 5 0 0 0 - - -, f 5;
#X floatatom 389 85 5 0 0 0 - - -, f 5;
#X floatatom 362 106 5 0 0 0 - - -, f 5;
#X obj 479 53 r round_mode;
#X obj 563 302 expr if($f1<-27 \, -0.75 \, if($f1>27 \, 0.75 \, 0))
;
#X obj 534 191 *;
#X obj 631 181 t b f;
#X obj 631 159 sig2num~;
#X obj 633 132 not~;
#X obj 479 75 not;
#X obj 633 110 r~ stuck_mode;
#X connect 1 0 2 0;
#X connect 1 0 21 0;
#X connect 2 0 18 0;
#X connect 2 0 22 0;
#X connect 3 0 4 0;
#X connect 5 0 6 0;
#X connect 6 0 0 0;
#X connect 8 0 18 0;
#X connect 8 1 18 1;
#X connect 9 0 19 0;
#X connect 9 0 24 0;
#X connect 13 0 14 1;
#X connect 13 0 16 1;
#X connect 14 0 10 0;
#X connect 15 0 14 0;
#X connect 16 0 11 0;
#X connect 17 0 16 0;
#X connect 18 0 20 0;
#X connect 18 0 25 0;
#X connect 19 0 17 0;
#X connect 23 0 29 0;
#X connect 24 0 15 0;
#X connect 25 0 3 0;
#X connect 26 0 25 0;
#X connect 26 1 25 1;
#X connect 27 0 26 0;
#X connect 28 0 27 0;
#X connect 29 0 8 0;
#X connect 30 0 28 0;
#X coords 0 -1 1 1 85 60 1 100 100;
#X restore 44 108 pd seek;
#N canvas 28 88 1265 628 aim 0;
#X obj 119 105 tgl 50 0 empty empty AIM 46 7 0 30 -262144 -1 -1 0 1
;
#X obj 114 77 sig2num~;
#X obj 114 55 r~ aim_mode;
#X obj 326 63 r ball_side;
#X obj 391 153 s~ aim_mode;
#X text 380 3 When to activate aim mode;
#X obj 481 60 r~ shoot_mode;
#X obj 481 82 not~;
#X obj 397 104 *~;
#X obj 326 85 sig~;
#X obj 936 56 r ball_angle;
#X obj 860 260 throw~ steering;
#X obj 1042 213 throw~ throttle;
#X text 924 25 Follow the ball;
#X obj 652 110 sig~;
#X obj 1043 184 *~;
#X obj 994 109 sig~;
#X obj 994 87 expr if(-27<=$f1<=27 \, 0.6 \, 0);
#X obj 652 88 expr if($f1<-27 \, -0.75 \, if($f1>27 \, 0.75 \, 0))
;
#X obj 888 111 r~ aim_mode;
#X obj 253 225 r~ aim_mode;
#X obj 253 274 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 253 247 sig2num~;
#X obj 249 310 spigot;
#X obj 245 362 delay 2000;
#X msg 314 328 0;
#X obj 365 207 r~ aim_mode;
#X obj 365 229 sig2num~;
#X obj 365 273 moses 1;
#X msg 361 301 1;
#X obj 730 338 r compass_heading;
#X obj 730 424 sig~;
#X obj 729 489 throw~ steering;
#X obj 731 396 *;
#X obj 868 362 t b f;
#X obj 442 348 tgl 100 0 empty adjustaintenough empty 17 7 0 100 -262144
-1 -1 0 1;
#X obj 730 452 *~;
#X obj 777 424 r~ aim_mode;
#X msg 245 384 1;
#X msg 397 303 0;
#X obj 864 213 *~;
#X floatatom 730 360 5 0 0 0 - - -, f 5;
#X obj 664 362 / 180;
#X obj 868 340 r adjustaintenough;
#X obj 275 435 s adjustaintenough;
#X obj 896 174 r adjustaintenough;
#X obj 658 473 sig2num~;
#X floatatom 666 498 5 0 0 0 - - -, f 5;
#X obj 864 235 *~;
#X obj 896 196 not;
#X obj 896 218 sig~;
#X obj 397 126 *~;
#X obj 586 75 not~;
#X obj 586 53 r~ stuck_mode;
#X connect 1 0 0 0;
#X connect 2 0 1 0;
#X connect 3 0 9 0;
#X connect 6 0 7 0;
#X connect 7 0 8 1;
#X connect 8 0 51 0;
#X connect 9 0 8 0;
#X connect 10 0 17 0;
#X connect 10 0 18 0;
#X connect 14 0 40 0;
#X connect 15 0 12 0;
#X connect 16 0 15 0;
#X connect 17 0 16 0;
#X connect 18 0 14 0;
#X connect 19 0 15 1;
#X connect 19 0 40 1;
#X connect 20 0 22 0;
#X connect 21 0 23 0;
#X connect 22 0 21 0;
#X connect 23 0 24 0;
#X connect 23 0 25 0;
#X connect 24 0 38 0;
#X connect 25 0 23 1;
#X connect 26 0 27 0;
#X connect 27 0 28 0;
#X connect 28 0 29 0;
#X connect 28 0 39 0;
#X connect 29 0 23 1;
#X connect 30 0 41 0;
#X connect 30 0 42 0;
#X connect 31 0 36 0;
#X connect 33 0 31 0;
#X connect 34 0 33 0;
#X connect 34 1 33 1;
#X connect 36 0 46 0;
#X connect 36 0 32 0;
#X connect 37 0 36 1;
#X connect 38 0 44 0;
#X connect 39 0 44 0;
#X connect 40 0 48 0;
#X connect 42 0 33 0;
#X connect 43 0 34 0;
#X connect 45 0 49 0;
#X connect 46 0 47 0;
#X connect 48 0 11 0;
#X connect 49 0 50 0;
#X connect 50 0 48 1;
#X connect 51 0 4 0;
#X connect 52 0 51 1;
#X connect 53 0 52 0;
#X coords 0 -1 1 1 85 60 1 100 100;
#X restore 666 110 pd aim;
#N canvas 28 88 1265 628 shoot 0;
#X obj 76 -51 tgl 50 0 empty empty ball_near 17 7 0 10 -262144 -1 -1
1 1;
#X obj 378 -100 r compass_heading;
#X obj 378 -78 abs;
#X obj 378 -56 < 70;
#X obj 372 -34 tgl 50 0 empty empty facing_enemy_goal 17 7 0 10 -262144
-1 -1 0 1;
#N canvas 0 93 1920 987 kick? 0;
#X obj 87 154 change;
#X obj 57 460 s kick;
#X obj 87 132 snapshot~;
#X obj 212 83 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 212 57 loadbang;
#X text 88 17 toggles kicker;
#X obj 212 107 metro 10;
#X obj 92 49 inlet~;
#X floatatom 154 153 5 0 0 0 - - -, f 5;
#X floatatom 147 179 5 0 0 0 - - -, f 5;
#X obj 87 105 expr~ $v1 >= 0.5;
#X obj 48 207 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 48 185 metro 170;
#X obj 48 243 spigot;
#X obj 87 208 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 14 140 loadbang;
#X obj 48 164 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 54 305 *;
#X obj 130 246 r~ not_adjusting;
#X floatatom 130 312 5 0 0 0 - - -, f 5;
#X obj 130 290 sig2num~;
#X obj 88 77 lop~ 5;
#X obj 178 356 r angle2goal;
#X obj 178 393 expr if($f1 < 10 \, if($f1 > -10 \, 1 \, 0) \, 0);
#X obj 49 385 *;
#X connect 0 0 9 0;
#X connect 0 0 14 0;
#X connect 2 0 0 0;
#X connect 2 0 8 0;
#X connect 3 0 6 0;
#X connect 4 0 3 0;
#X connect 6 0 2 0;
#X connect 7 0 21 0;
#X connect 10 0 2 0;
#X connect 11 0 13 0;
#X connect 12 0 11 0;
#X connect 13 0 17 0;
#X connect 14 0 13 1;
#X connect 15 0 16 0;
#X connect 16 0 12 0;
#X connect 17 0 24 0;
#X connect 18 0 20 0;
#X connect 20 0 17 1;
#X connect 20 0 19 0;
#X connect 21 0 10 0;
#X connect 22 0 23 0;
#X connect 23 0 24 1;
#X connect 24 0 1 0;
#X restore 832 358 pd kick?;
#X obj 636 -97 r angle2goal;
#X obj 639 -71 abs;
#X obj 589 -23 tgl 50 0 empty empty Facing_Goal 17 7 0 10 -262144 -1
-1 0 1;
#X obj 75 21 sig~;
#X obj 372 21 sig~;
#X obj 598 39 sig~;
#X text 639 -125 Vision:;
#X text 77 -128 IR:;
#X text 382 -121 Compass:;
#X obj 801 409 s~ shoot_mode;
#X obj 1037 -104 r ball_angle;
#X obj 1039 -50 abs;
#X obj 1039 -28 < 45;
#X obj 1072 1 tgl 50 0 empty empty facing_ball 17 7 0 10 -262144 -1
-1 0 1;
#X obj 1037 89 sig~;
#X obj 641 -48 < 25;
#X floatatom 1065 -74 5 0 0 0 - - -, f 5;
#X floatatom 137 223 5 0 0 0 - - -, f 5;
#X obj 140 246 hsl 64 15 -35 35 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 0 1;
#X obj 250 201 < 20;
#X obj 97 274 sig~;
#X obj 86 427 *~;
#X obj 127 527 throw~ steering;
#X obj 252 222 tgl 50 0 empty empty facing_goal 17 7 0 10 -262144 -1
-1 0 1;
#X text 134 160 controlling steering while shooting for the goal.,
f 29;
#X obj 145 347 r~ shoot_mode;
#X obj 104 194 r angle2goal;
#N canvas 374 189 401 248 diy_pwm 0;
#X obj 42 187 outlet~;
#X obj 201 186 outlet~;
#X obj 42 165 expr~ $v1 < $f2;
#X obj 201 164 expr~ $v1 >= $f2;
#X obj 279 25 loadbang;
#X floatatom 279 69 5 0 0 0 - - -, f 5;
#X msg 279 47 0.15;
#X obj 118 50 phasor~ 4;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 4 0 6 0;
#X connect 5 0 2 1;
#X connect 5 0 3 1;
#X connect 6 0 5 0;
#X connect 7 0 2 0;
#X connect 7 0 3 0;
#X restore 170 374 pd diy_pwm;
#X obj 87 454 *~;
#X obj 145 347 r~ shoot_mode;
#X obj 413 536 throw~ throttle;
#X floatatom 281 300 5 0 0 0 - - -, f 5;
#X obj 118 107 tgl 40 0 empty empty SHOOT 35 7 0 30 -262144 -1 -1 0
1;
#X obj 911 200 sig~;
#X floatatom 533 508 5 0 0 0 - - -, f 5;
#X obj 185 482 s~ not_adjusting;
#X obj 314 373 r~ not_adjusting;
#X obj 226 459 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 235 421 sig2num~;
#X obj 664 344 sig2num~;
#X obj 503 484 sig2num~;
#X obj 57 497 sig2num~;
#X floatatom 61 519 5 0 0 0 - - -, f 5;
#X obj 378 267 *~;
#X obj 467 225 loadbang;
#X floatatom 467 269 5 0 0 0 - - -, f 5;
#X obj 97 309 +~;
#X obj 378 289 sig2num~;
#X floatatom 378 311 5 0 0 0 - - -, f 5;
#X obj 350 185 r ball_angle;
#X obj 52 347 sig2num~;
#X floatatom 44 421 5 0 0 0 - - -, f 5;
#X obj 46 376 * 1.2;
#X floatatom 405 214 5 0 0 0 - - -, f 5;
#X obj 349 227 / 180;
#X msg 469 248 20;
#X obj 85 236 / 100;
#X obj 87 476 *~ 0.9;
#X obj 805 322 expr~ $v1 * $v2 * $v3 * $v4 * $v5 * $v6;
#X obj 1010 371 r angle2goal;
#X obj 1013 422 / 30;
#X obj 1013 444 sig~;
#X obj 1021 520 throw~ steering;
#X obj 1012 482 *~;
#X obj 1140 389 loadbang;
#X floatatom 1132 471 5 0 0 0 - - -, f 5;
#X msg 1138 435 0.3;
#X obj 1803 274 r way_is_clear;
#X obj 1677 272 r~ shoot_mode;
#X obj 1803 296 sig~;
#X obj 1733 357 *~;
#X obj 1612 311 loadbang;
#X floatatom 1613 369 5 0 0 0 - - -, f 5;
#X msg 1613 339 0.5;
#X obj 1713 434 *~;
#X obj 1717 471 throw~ throttle;
#X obj 71 -76 r ball_near;
#X obj 1141 274 not~;
#X obj 932 170 r ball_side;
#X obj 407 455 expr~ $v1 * $v2;
#X obj 440 357 *~ 0.8;
#X obj 1146 252 r~ stuck_mode;
#X connect 0 0 9 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 10 0;
#X connect 6 0 7 0;
#X connect 7 0 21 0;
#X connect 8 0 11 0;
#X connect 9 0 64 0;
#X connect 10 0 64 1;
#X connect 11 0 64 2;
#X connect 16 0 22 0;
#X connect 16 0 17 0;
#X connect 17 0 18 0;
#X connect 18 0 19 0;
#X connect 18 0 20 0;
#X connect 20 0 64 4;
#X connect 21 0 8 0;
#X connect 23 0 24 0;
#X connect 25 0 29 0;
#X connect 26 0 52 0;
#X connect 27 0 34 0;
#X connect 29 0 37 0;
#X connect 31 0 27 1;
#X connect 31 0 86 0;
#X connect 32 0 25 0;
#X connect 32 0 23 0;
#X connect 32 0 62 0;
#X connect 33 0 34 1;
#X connect 33 1 41 0;
#X connect 33 1 44 0;
#X connect 34 0 63 0;
#X connect 39 0 64 3;
#X connect 42 0 85 0;
#X connect 44 0 43 0;
#X connect 45 0 38 0;
#X connect 46 0 40 0;
#X connect 47 0 48 0;
#X connect 49 0 53 0;
#X connect 49 0 52 1;
#X connect 50 0 61 0;
#X connect 51 0 49 1;
#X connect 52 0 27 0;
#X connect 52 0 56 0;
#X connect 53 0 54 0;
#X connect 55 0 59 0;
#X connect 55 0 60 0;
#X connect 56 0 58 0;
#X connect 58 0 57 0;
#X connect 60 0 49 0;
#X connect 61 0 51 0;
#X connect 62 0 26 0;
#X connect 63 0 47 0;
#X connect 63 0 28 0;
#X connect 64 0 15 0;
#X connect 64 0 45 0;
#X connect 64 0 5 0;
#X connect 65 0 66 0;
#X connect 66 0 67 0;
#X connect 67 0 69 0;
#X connect 70 0 72 0;
#X connect 71 0 69 1;
#X connect 72 0 71 0;
#X connect 73 0 75 0;
#X connect 74 0 76 0;
#X connect 75 0 76 1;
#X connect 76 0 80 0;
#X connect 77 0 79 0;
#X connect 78 0 80 1;
#X connect 79 0 78 0;
#X connect 80 0 81 0;
#X connect 82 0 0 0;
#X connect 83 0 64 5;
#X connect 84 0 39 0;
#X connect 85 0 46 0;
#X connect 85 0 36 0;
#X connect 86 0 85 1;
#X connect 87 0 83 0;
#X coords 0 -1 1 1 85 60 1 100 100;
#X restore 925 118 pd shoot;
#X obj 419 277 r ball_angle;
#X floatatom 419 299 5 0 0 0 - - -, f 5;
#X obj 775 272 r compass_heading;
#X floatatom 775 298 5 0 0 0 - - -, f 5;
#X obj 679 298 tgl 40 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 286 275 r ball_detected;
#X obj 286 299 tgl 40 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 544 258 r ball_distance;
#X obj 383 331 hsl 128 15 -180 180 0 0 empty empty empty -2 -8 0 10
-262144 -1 -1 0 1;
#X obj 447 717 r way_is_clear;
#X obj 447 740 not;
#X obj 446 796 bang;
#X obj 430 942 throw~ throttle;
#X obj 447 821 delay 5000;
#X obj 555 800 r way_is_clear;
#X obj 348 822 delay 1000;
#X msg 354 857 0;
#X msg 558 846 stop;
#X obj 461 902 sig~;
#X msg 448 850 -0.75;
#X text 558 693 drive backwards if the robot is stuck for 5 seconds
, f 18;
#X obj 394 786 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 314 822 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 401 722 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 447 762 change;
#N canvas 28 48 1172 1551 round 0;
#X obj 119 105 tgl 50 0 empty empty ROUND 46 7 0 30 -262144 -1 -1 0
1;
#X obj 314 48 r ball_side;
#X obj 314 70 not;
#X obj 356 129 *;
#X obj 353 177 sig~;
#X obj 421 77 t b f;
#X obj 424 48 r ball_near;
#X obj 679 129 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 677 64 sig2num~;
#X obj 677 87 change;
#X obj 677 109 moses 1;
#X obj 672 189 spigot;
#X msg 732 156 0;
#X msg 869 274 1;
#X obj 674 349 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 784 147 loadbang;
#X msg 784 169 1;
#X obj 353 196 s~ possible_round_mode;
#X msg 685 233 1;
#X obj 677 42 r~ possible_round_mode;
#X msg 703 337 0;
#X floatatom 613 192 5 0 0 0 - - -, f 5;
#X obj 634 236 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 683 213 change;
#X obj 685 261 s round_mode;
#X obj 703 367 s round_mode;
#X obj 114 55 r round_mode;
#X obj 344 540 throw~ throttle;
#X obj 537 540 throw~ steering;
#X obj 469 314 r round_mode;
#X obj 350 497 sig~;
#X obj 529 506 sig~;
#X obj 918 353 r ball_angle;
#X obj 439 425 t b f;
#X obj 356 466 *;
#X obj 526 464 *;
#X obj 918 397 change;
#X obj 918 419 moses 1;
#X obj 918 442 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 902 471 spigot;
#X msg 962 465 0;
#X obj 903 529 s circle;
#X obj 1045 395 r round_mode;
#X obj 1045 417 change;
#X obj 1045 439 moses 1;
#X msg 1021 471 1;
#X obj 1055 488 s circle;
#X obj 879 511 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 431 378 r circle;
#X floatatom 918 375 5 0 0 0 - - -, f 5;
#X msg 900 505 1;
#X obj 71 262 r round_mode;
#X obj 732 453 s circle;
#X obj 730 408 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 730 428 0;
#X obj 1069 467 not;
#X obj 100 342 *;
#X obj 173 263 r circle;
#X obj 173 285 not;
#X obj 173 307 t b f;
#X obj 100 364 sig~;
#X obj 99 402 throw~ steering;
#X text 309 12 When the conditions are met to activate round mode,
f 33;
#X text 677 10 Only activate round mode once every 5 seconds, f 30
;
#X text 75 232 First turn to the left;
#X text 368 285 Secondly \, do a circle around the ball;
#X text 925 320 When to activate circle;
#X floatatom 522 82 5 0 0 0 - - -, f 5;
#X floatatom 314 92 5 0 0 0 - - -, f 5;
#X obj 71 283 * -0.5;
#X obj 571 132 t b f;
#X obj 571 110 sig2num~;
#X obj 507 165 *;
#X obj 574 80 not~;
#X obj 431 400 * 0.5;
#X obj 689 494 r circle;
#X obj 692 520 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 965 374 == 90;
#X obj 574 58 r~ stuck_mode;
#X obj 666 314 delay 3000;
#X obj 355 441 * 1;
#X obj 526 442 * 0.5;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 0 68 0;
#X connect 3 0 72 0;
#X connect 4 0 17 0;
#X connect 5 0 3 0;
#X connect 5 1 3 1;
#X connect 6 0 5 0;
#X connect 6 0 67 0;
#X connect 7 0 11 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 10 1 7 0;
#X connect 11 0 21 0;
#X connect 11 0 22 0;
#X connect 11 0 23 0;
#X connect 11 0 12 0;
#X connect 11 0 79 0;
#X connect 12 0 11 1;
#X connect 13 0 11 1;
#X connect 15 0 16 0;
#X connect 16 0 11 1;
#X connect 18 0 24 0;
#X connect 19 0 8 0;
#X connect 20 0 25 0;
#X connect 23 0 18 0;
#X connect 26 0 0 0;
#X connect 29 0 80 0;
#X connect 29 0 81 0;
#X connect 30 0 27 0;
#X connect 31 0 28 0;
#X connect 32 0 49 0;
#X connect 32 0 77 0;
#X connect 33 0 34 0;
#X connect 33 0 35 0;
#X connect 33 1 34 1;
#X connect 33 1 35 1;
#X connect 34 0 30 0;
#X connect 35 0 31 0;
#X connect 36 0 37 0;
#X connect 37 1 38 0;
#X connect 38 0 39 0;
#X connect 39 0 47 0;
#X connect 39 0 50 0;
#X connect 39 0 40 0;
#X connect 40 0 39 1;
#X connect 42 0 43 0;
#X connect 43 0 44 0;
#X connect 44 0 45 0;
#X connect 44 0 46 0;
#X connect 44 1 55 0;
#X connect 44 1 45 0;
#X connect 45 0 39 1;
#X connect 48 0 74 0;
#X connect 50 0 41 0;
#X connect 51 0 69 0;
#X connect 53 0 54 0;
#X connect 54 0 52 0;
#X connect 55 0 46 0;
#X connect 56 0 60 0;
#X connect 57 0 58 0;
#X connect 58 0 59 0;
#X connect 59 0 56 0;
#X connect 59 1 56 1;
#X connect 60 0 61 0;
#X connect 69 0 56 0;
#X connect 70 0 72 0;
#X connect 70 1 72 1;
#X connect 71 0 70 0;
#X connect 72 0 4 0;
#X connect 73 0 71 0;
#X connect 74 0 33 0;
#X connect 75 0 76 0;
#X connect 77 0 36 0;
#X connect 78 0 73 0;
#X connect 79 0 13 0;
#X connect 79 0 14 0;
#X connect 79 0 20 0;
#X connect 80 0 34 0;
#X connect 81 0 35 0;
#X coords 0 -1 1 1 85 60 1 100 100;
#X restore 346 105 pd round;
#X text 28 18 Seek Mode: Active when the ball is NOT between us and
the goal \, and we are not close to the ball. Purpose is to get close
to the ball., f 29;
#X text 324 24 Round Mode: Active when the ball is NOT between us and
the goal and we are close to the ball. Purpose is to get the ball between
us and the target goal., f 38;
#X text 663 27 Aim Mode: Active when the ball is between us and the
target goal but we cannot see the goal or we are not close to the ball.
Purpose is to line up the ball up with the goal, f 35;
#X text 928 34 Shoot Mode: Active when ball is directly between the
robot and the goal. Purpose is to score!, f 30;
#X obj 916 271 r angle2goal;
#X obj 917 315 < 10;
#X obj 916 293 abs;
#X obj 956 295 tgl 50 0 empty empty facing_goal 17 7 0 10 -262144 -1
-1 0 1;
#X obj 916 351 s facing_goal;
#X obj 550 344 s ball_near;
#X obj 679 271 r ball_side;
#X obj 524 344 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X floatatom 527 310 5 0 0 0 - - -, f 5;
#X obj 305 536 s kick;
#X obj 304 410 bng 100 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 845 325 5 0 0 0 - - -, f 5;
#N canvas 31 398 1166 628 stuckNEW 1;
#X text 252 81 STUCK;
#X obj 106 104 tgl 50 0 empty empty STUCK 17 7 0 20 -262144 -1 -1 0
1;
#X obj 220 188 throw~ throttle;
#X obj 601 177 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 597 127 change;
#X obj 597 149 moses 1;
#X obj 592 229 spigot;
#X msg 665 190 0, f 2;
#X msg 789 314 1;
#X obj 594 389 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 704 187 loadbang;
#X msg 704 209 1;
#X msg 605 273 1;
#X msg 623 377 0;
#X obj 613 254 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 597 50 Only activate round mode once every 5 seconds, f 30
;
#X obj 597 82 r stuck;
#X obj 605 298 s stuck_mode;
#X obj 630 409 s stuck_mode;
#X obj 254 109 r stuck_mode;
#X obj 77 49 r stuck_mode;
#X obj 220 159 sig~;
#X obj 349 162 sig~;
#X obj 349 184 throw~ steering;
#X obj 349 140 * -0.5;
#X obj 220 137 * -10;
#X obj 587 341 delay 1000;
#X connect 3 0 6 0;
#X connect 4 0 5 0;
#X connect 5 1 3 0;
#X connect 6 0 14 0;
#X connect 6 0 7 0;
#X connect 6 0 26 0;
#X connect 7 0 6 1;
#X connect 8 0 6 1;
#X connect 10 0 11 0;
#X connect 11 0 6 1;
#X connect 12 0 17 0;
#X connect 13 0 18 0;
#X connect 14 0 12 0;
#X connect 16 0 4 0;
#X connect 19 0 24 0;
#X connect 19 0 25 0;
#X connect 20 0 1 0;
#X connect 21 0 2 0;
#X connect 22 0 23 0;
#X connect 24 0 22 0;
#X connect 25 0 21 0;
#X connect 26 0 8 0;
#X connect 26 0 9 0;
#X connect 26 0 13 0;
#X coords 0 -1 1 1 85 60 1 100 100;
#X restore 1116 157 pd stuckNEW;
#X obj 599 315 >= 110;
#X connect 1 0 0 2;
#X connect 3 0 0 0;
#X connect 7 0 8 0;
#X connect 8 0 15 0;
#X connect 9 0 10 0;
#X connect 12 0 13 0;
#X connect 14 0 45 0;
#X connect 14 0 50 0;
#X connect 16 0 17 0;
#X connect 17 0 31 0;
#X connect 18 0 20 0;
#X connect 18 0 30 0;
#X connect 20 0 26 0;
#X connect 20 0 22 0;
#X connect 20 0 28 0;
#X connect 21 0 24 0;
#X connect 22 0 23 0;
#X connect 22 0 29 0;
#X connect 23 0 25 0;
#X connect 24 0 20 0;
#X connect 24 0 22 0;
#X connect 25 0 19 0;
#X connect 26 0 25 0;
#X connect 31 0 18 0;
#X connect 37 0 39 0;
#X connect 37 0 48 0;
#X connect 38 0 40 0;
#X connect 38 0 41 0;
#X connect 39 0 38 0;
#X connect 43 0 11 0;
#X connect 47 0 46 0;
#X connect 50 0 42 0;
#X connect 50 0 44 0;
