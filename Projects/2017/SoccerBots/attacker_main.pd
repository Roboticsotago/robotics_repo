#N canvas 71 147 1265 718 10;
#N canvas 121 207 952 540 differential_drive 1;
#X obj 310 220 vsl 15 100 -1 1 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 7058 1;
#X obj 390 228 vsl 15 100 -1 1 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 2842 1;
#X obj 314 140 +;
#X obj 390 140 +;
#X obj 314 162 clip -1 1;
#X obj 343 110 t b f;
#X obj 403 79 * -1;
#X obj 403 110 t b f;
#X obj 390 162 clip -1 1;
#X obj 251 340 s left_speed;
#X obj 398 343 s right_speed;
#X text 169 -144 forward/ backwards;
#X text 477 -146 left/right;
#X obj 616 -130 inlet;
#X text 563 -155 steering toggle;
#X obj 190 -119 inlet~;
#X obj 690 215 hsl 128 15 10 2000 0 0 empty empty empty -2 -8 0 10
-262144 -1 -1 64 1;
#X obj 487 -124 inlet~;
#X obj 643 173 loadbang;
#X msg 648 196 20;
#X obj 490 -67 *~;
#X obj 256 -121 inlet;
#X obj 190 -67 *~;
#X obj 204 116 tgl 50 1 steering_toggle_out steering_toggle_in empty
17 7 0 10 -262144 -1 -1 1 1;
#X obj 621 -75 s steering_toggle_in;
#X obj 617 -51 r steering_toggle_out;
#X obj 243 -99 s throttle_toggle_in;
#X obj 119 120 tgl 50 1 throttle_toggle_out throttle_toggle_in empty
17 7 0 10 -262144 -1 -1 1 1;
#X obj 242 -73 r throttle_toggle_out;
#X obj 201 228 hsl 60 15 -1 1 0 0 empty steering_drive empty -2 -8
0 10 -262144 -1 -1 3788 1;
#X obj 137 205 vsl 15 60 -1 1 0 0 empty throttle_drive empty 0 -9 0
10 -262144 -1 -1 2950 1;
#X obj 190 46 s throttle_drive;
#X obj 491 48 s steering_drive;
#X floatatom 688 195 5 0 0 0 - - -, f 5;
#X obj 191 -43 lop~ 10;
#X obj 492 -44 lop~ 10;
#X obj 654 241 s sampling_period;
#X obj 254 -48 r sampling_period;
#X obj 610 -30 r sampling_period;
#X obj 194 -23 sig2num~;
#X obj 494 -20 sig2num~;
#X obj 406 195 * 1.5;
#X obj 340 191 * 1.5;
#X connect 0 0 9 0;
#X connect 1 0 10 0;
#X connect 2 0 4 0;
#X connect 3 0 8 0;
#X connect 4 0 42 0;
#X connect 5 0 2 0;
#X connect 5 1 2 1;
#X connect 6 0 7 0;
#X connect 7 0 3 0;
#X connect 7 1 3 1;
#X connect 8 0 41 0;
#X connect 13 0 24 0;
#X connect 15 0 22 0;
#X connect 16 0 33 0;
#X connect 16 0 36 0;
#X connect 17 0 20 0;
#X connect 18 0 19 0;
#X connect 19 0 16 0;
#X connect 20 0 35 0;
#X connect 21 0 26 0;
#X connect 22 0 34 0;
#X connect 25 0 20 1;
#X connect 28 0 22 1;
#X connect 34 0 39 0;
#X connect 35 0 40 0;
#X connect 37 0 39 1;
#X connect 38 0 40 1;
#X connect 39 0 31 0;
#X connect 39 0 2 0;
#X connect 39 0 3 0;
#X connect 40 0 32 0;
#X connect 40 0 6 0;
#X connect 40 0 5 0;
#X connect 41 0 1 0;
#X connect 42 0 0 0;
#X coords 0 -1 1 1 170 200 1 100 100;
#X restore 13 229 pd differential_drive;
#X obj 120 201 catch~ steering;
#X obj 254 394 r range;
#X text 256 366 Ultrasound:;
#N canvas 99 65 895 549 serial-connection 0;
#X obj 223 184 s motor_device;
#X text 216 68 Tell motor-control what serial device to use:;
#X obj 223 90 loadbang;
#X obj 223 112 delay 50;
#X msg 223 136 devicename /dev/serial/by-id/usb-DSpace__www.dspace.org.nz__DSpace_Robot_2.0_55234313335351503221-if00
;
#X obj 116 90 r reconnect;
#X obj 108 119 bng 15 250 50 0 empty empty Connect 17 7 0 10 -262144
-1 -1;
#X msg 128 190 close;
#X obj 108 140 bng 15 250 50 0 empty empty disconnect 17 7 0 10 -262144
-1 -1;
#X text 202 229 TODO: consider using the hostname message to set this.
Actually \, since the two robots will have different control patches
anyway \, this will work perfectly well.;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 0 0;
#X connect 5 0 6 0;
#X connect 6 0 4 0;
#X connect 7 0 0 0;
#X connect 8 0 7 0;
#X coords 0 -1 1 1 85 60 1 100 100;
#X restore 24 443 pd serial-connection;
#X obj 543 369 r angle2goal;
#X obj 544 413 < 10;
#X obj 543 391 abs;
#X obj 585 393 tgl 50 0 empty empty facing_goal 17 7 0 10 -262144 -1
-1 0 1;
#X obj 678 351 r ball_near;
#X obj 247 466 tgl 50 0 empty empty way_is_clear 17 7 0 10 -262144
-1 -1 1 1;
#X obj 246 521 s way_is_clear;
#X obj 12 201 catch~ throttle;
#N canvas 0 51 1265 718 seek 0;
#X obj 292 -4 r ball_side;
#X text 295 -23 Seek mode:;
#X obj 402 29 r~ shoot_mode;
#X obj 291 19 sig~;
#X obj 291 99 s~ seek_mode;
#X obj 120 109 tgl 40 0 empty empty SEEK 35 7 0 30 -262144 -1 -1 0
1;
#X obj 1115 300 throw~ throttle;
#X obj 1171 240 r way_is_clear;
#X obj 1118 266 *~;
#X obj 1001 188 metro;
#X obj 1005 169 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
1 1;
#X obj 1098 189 * 1000;
#X floatatom 1097 170 5 0 0 0 - - -, f 5;
#X obj 1095 127 loadbang;
#X floatatom 983 279 5 0 0 0 - - -, f 5;
#X obj 1000 215 random 20;
#X obj 1000 237 / 10;
#X obj 1000 259 - 1;
#X obj 942 363 throw~ steering;
#X obj 1100 221 r~ seek_mode;
#X obj 906 254 r~ seek_mode;
#X obj 949 296 *~;
#X obj 1001 296 r way_is_clear;
#X obj 943 322 *~;
#X obj 1001 318 * 0.8;
#X obj 1001 340 + 0.2;
#X obj 1118 244 *~ 0.9;
#X msg 1097 145 4;
#X obj 998 147 loadbang;
#X obj 206 481 r ball_angle;
#X obj 697 415 r compass_heading;
#X obj 699 504 tgl 50 0 empty empty facing_own_goal 17 7 0 10 -262144
-1 -1 0 1;
#X obj 662 444 abs;
#X obj 682 607 sig~;
#X obj 749 771 throw~ throttle;
#X obj 820 546 loadbang;
#X floatatom 822 599 5 0 0 0 - - -, f 5;
#X obj 709 627 *~;
#X obj 237 244 r compass_heading;
#X obj 233 271 expr if($f1 < 0 \, $f1/180 + 1 \, $f1/180 - 1);
#X obj 424 863 throw~ steering;
#X obj 231 301 sig~;
#X obj 236 328 *~;
#X obj 134 312 loadbang;
#X floatatom 132 364 5 0 0 0 - - -, f 5;
#X floatatom 230 566 5 0 0 0 - - -, f 5;
#X floatatom 152 505 5 0 0 0 - - -, f 5;
#X obj 116 541 loadbang;
#X floatatom 114 593 5 0 0 0 - - -, f 5;
#X obj 195 587 sig~;
#X obj 177 616 *~;
#X obj 410 732 r~ compass_correct;
#X obj 174 649 s~ ball_correct;
#X obj 236 350 s~ compass_correct;
#X obj 573 734 r~ ball_correct;
#X obj 501 779 +~;
#X obj 496 820 *~;
#X obj 594 805 r~ seek_mode;
#X obj 784 654 r~ seek_mode;
#X obj 740 684 *~;
#X obj 699 474 expr $f1 <= 180 && $f1 >= 90;
#X obj 210 522 expr if($f1 >= -50 && $f1 <= 0 \, $f1/50 + 1 \, if($f1
> 0 && $f1 <= 50 \, $f1/50 -1 \, 0));
#X floatatom 662 466 5 0 0 0 - - -, f 5;
#X text 906 501 <- TODO: this probably needs tweaking.;
#X text 331 476 TODO: maybe take into account the ball distance for
avoidance., f 33;
#X obj 744 78 metro 500;
#X obj 745 162 s kick;
#X obj 745 52 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 741 20 loadbang;
#X msg 746 104 0;
#X obj 749 137 spigot;
#X obj 829 102 r~ seek_mode;
#X obj 836 158 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X floatatom 286 293 5 0 0 0 - - -, f 5;
#X floatatom 569 873 5 0 0 0 - - -, f 5;
#X obj 241 139 sig2num~;
#X obj 811 378 sig2num~;
#X obj 829 124 sig2num~;
#X obj 569 851 sig2num~;
#X obj 291 46 not~;
#X obj 402 51 not~;
#X msg 822 569 0.7;
#X floatatom 403 794 5 0 0 0 - - -, f 5;
#X obj 403 772 sig2num~;
#X obj 253 22 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 699 559 * 2;
#X obj 699 581 - 1;
#X floatatom 729 603 5 0 0 0 - - -, f 5;
#X floatatom 563 784 5 0 0 0 - - -, f 5;
#X obj 563 762 sig2num~;
#X text 730 562 Allow reverse!, f 10;
#X obj 935 568 r range;
#X floatatom 935 688 5 0 0 0 - - -, f 5;
#X obj 935 666 expr 1-1/($f1*0.1+1);
#X obj 740 706 *~;
#X text 1005 98 Some randomness?;
#X obj 935 595 select 0;
#X msg 935 617 99;
#X floatatom 935 639 5 0 0 0 - - -, f 5;
#X text 1011 572 Maybe inhibit throttle when way not clear?, f 24
;
#X text 835 27 Don't kick while seeking;
#X obj 1239 573 r ball_distance;
#X floatatom 1239 595 5 0 0 0 - - -, f 5;
#X msg 135 336 1.2;
#X floatatom 1105 688 5 0 0 0 - - -, f 5;
#X obj 740 728 *~;
#X obj 1105 666 expr 1-1/($f1*2+1);
#X msg 117 565 0.4;
#X obj 530 0 r stuck;
#X obj 530 22 not;
#X obj 530 44 sig~;
#X obj 288 73 expr~ $v1 * $v2 * $v3;
#X connect 0 0 3 0;
#X connect 0 0 84 0;
#X connect 2 0 80 0;
#X connect 3 0 79 0;
#X connect 7 0 8 1;
#X connect 9 0 15 0;
#X connect 10 0 9 0;
#X connect 11 0 9 1;
#X connect 12 0 11 0;
#X connect 13 0 27 0;
#X connect 14 0 21 1;
#X connect 15 0 16 0;
#X connect 16 0 17 0;
#X connect 17 0 14 0;
#X connect 19 0 26 0;
#X connect 20 0 21 0;
#X connect 21 0 23 0;
#X connect 22 0 24 0;
#X connect 23 0 76 0;
#X connect 24 0 25 0;
#X connect 25 0 23 1;
#X connect 26 0 8 0;
#X connect 27 0 12 0;
#X connect 28 0 10 0;
#X connect 29 0 46 0;
#X connect 29 0 61 0;
#X connect 30 0 32 0;
#X connect 31 0 85 0;
#X connect 32 0 60 0;
#X connect 32 0 62 0;
#X connect 33 0 37 0;
#X connect 35 0 81 0;
#X connect 36 0 37 1;
#X connect 37 0 59 0;
#X connect 38 0 39 0;
#X connect 39 0 41 0;
#X connect 39 0 73 0;
#X connect 41 0 42 1;
#X connect 42 0 53 0;
#X connect 43 0 103 0;
#X connect 44 0 42 0;
#X connect 47 0 107 0;
#X connect 48 0 50 0;
#X connect 49 0 50 1;
#X connect 50 0 52 0;
#X connect 51 0 55 0;
#X connect 51 0 83 0;
#X connect 54 0 55 1;
#X connect 54 0 89 0;
#X connect 55 0 56 0;
#X connect 56 0 40 0;
#X connect 56 0 78 0;
#X connect 57 0 56 1;
#X connect 58 0 59 1;
#X connect 59 0 94 0;
#X connect 60 0 31 0;
#X connect 61 0 45 0;
#X connect 61 0 49 0;
#X connect 65 0 69 0;
#X connect 67 0 65 0;
#X connect 68 0 67 0;
#X connect 69 0 70 0;
#X connect 70 0 66 0;
#X connect 71 0 77 0;
#X connect 75 0 5 0;
#X connect 77 0 70 1;
#X connect 77 0 72 0;
#X connect 78 0 74 0;
#X connect 79 0 111 0;
#X connect 80 0 111 1;
#X connect 81 0 36 0;
#X connect 83 0 82 0;
#X connect 85 0 86 0;
#X connect 86 0 87 0;
#X connect 86 0 33 0;
#X connect 89 0 88 0;
#X connect 91 0 96 0;
#X connect 92 0 94 1;
#X connect 93 0 92 0;
#X connect 94 0 105 0;
#X connect 96 0 97 0;
#X connect 96 1 98 0;
#X connect 97 0 98 0;
#X connect 98 0 93 0;
#X connect 101 0 102 0;
#X connect 102 0 106 0;
#X connect 103 0 44 0;
#X connect 104 0 105 1;
#X connect 105 0 34 0;
#X connect 106 0 104 0;
#X connect 107 0 48 0;
#X connect 108 0 109 0;
#X connect 109 0 110 0;
#X connect 110 0 111 2;
#X connect 111 0 4 0;
#X connect 111 0 75 0;
#X coords 0 -1 1 1 85 60 1 100 100;
#X restore 18 122 pd seek;
#N canvas 0 51 1265 718 aim 0;
#X text 603 162 Aim mode:;
#X obj 605 184 r ball_side;
#X obj 698 188 r~ shoot_mode;
#X obj 606 231 *~;
#X obj 604 207 sig~;
#X obj 583 313 s~ aim_mode;
#X obj 702 239 r ball_detected;
#X obj 606 273 *~;
#X obj 124 111 tgl 40 0 empty empty AIM 33 7 0 30 -262144 -1 -1 0 1
;
#X obj 588 406 r ball_angle;
#X obj 326 430 r compass_heading;
#X obj 326 477 sig~;
#X obj 585 500 sig~;
#X obj 463 422 loadbang;
#X floatatom 462 474 5 0 0 0 - - -, f 5;
#X obj 417 517 *~;
#X obj 710 418 loadbang;
#X floatatom 708 470 5 0 0 0 - - -, f 5;
#X obj 598 535 *~;
#X obj 489 582 +~;
#X obj 487 658 throw~ steering;
#X obj 530 617 *~;
#X obj 564 562 r~ aim_mode;
#X obj 945 429 loadbang;
#X floatatom 943 481 5 0 0 0 - - -, f 5;
#X obj 924 583 throw~ throttle;
#X obj 923 508 *~;
#X obj 924 403 r~ aim_mode;
#X obj 585 463 expr $f1/180.0;
#X obj 326 455 expr $f1/180.0;
#X floatatom 267 478 5 0 0 0 - - -, f 5;
#X floatatom 627 498 5 0 0 0 - - -, f 5;
#X floatatom 404 661 5 0 0 0 - - -, f 5;
#X floatatom 953 560 5 0 0 0 - - -, f 5;
#X msg 946 452 0.3;
#X floatatom 608 440 5 0 0 0 - - -, f 5;
#X floatatom 271 451 5 0 0 0 - - -, f 5;
#X obj 436 306 sig2num~;
#X obj 404 639 sig2num~;
#X obj 953 538 sig2num~;
#X obj 698 210 not~;
#X msg 463 444 0.25;
#X msg 711 441 0.5;
#X obj 825 150 r stuck;
#X obj 825 172 not;
#X obj 825 194 sig~;
#X obj 606 253 *~;
#X connect 1 0 4 0;
#X connect 2 0 40 0;
#X connect 3 0 46 0;
#X connect 4 0 3 0;
#X connect 6 0 7 1;
#X connect 7 0 5 0;
#X connect 7 0 37 0;
#X connect 9 0 28 0;
#X connect 9 0 35 0;
#X connect 10 0 29 0;
#X connect 10 0 36 0;
#X connect 11 0 15 0;
#X connect 12 0 18 0;
#X connect 13 0 41 0;
#X connect 14 0 15 1;
#X connect 15 0 19 0;
#X connect 16 0 42 0;
#X connect 17 0 18 1;
#X connect 18 0 19 1;
#X connect 19 0 21 0;
#X connect 21 0 20 0;
#X connect 21 0 38 0;
#X connect 22 0 21 1;
#X connect 23 0 34 0;
#X connect 24 0 26 1;
#X connect 26 0 25 0;
#X connect 26 0 39 0;
#X connect 27 0 26 0;
#X connect 28 0 12 0;
#X connect 28 0 31 0;
#X connect 29 0 11 0;
#X connect 29 0 30 0;
#X connect 34 0 24 0;
#X connect 37 0 8 0;
#X connect 38 0 32 0;
#X connect 39 0 33 0;
#X connect 40 0 3 1;
#X connect 41 0 14 0;
#X connect 42 0 17 0;
#X connect 43 0 44 0;
#X connect 44 0 45 0;
#X connect 45 0 46 1;
#X connect 46 0 7 0;
#X coords 0 -1 1 1 85 60 1 100 100;
#X restore 313 114 pd aim;
#N canvas 0 93 1920 987 shoot 1;
#X obj 46 276 tgl 50 0 empty empty ball_near 17 7 0 10 -262144 -1 -1
0 1;
#X obj 45 224 r ball_distance;
#X obj 348 227 r compass_heading;
#X obj 348 249 abs;
#X obj 348 271 < 70;
#X obj 342 293 tgl 50 0 empty empty facing_enemy_goal 17 7 0 10 -262144
-1 -1 1 1;
#N canvas 0 93 1920 987 kick? 0;
#X obj 87 154 change;
#X obj 57 460 s kick;
#X obj 87 132 snapshot~;
#X obj 212 83 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 212 57 loadbang;
#X text 88 17 toggles kicker;
#X obj 212 107 metro 10;
#X obj 92 49 inlet~;
#X floatatom 154 153 5 0 0 0 - - -, f 5;
#X floatatom 147 179 5 0 0 0 - - -, f 5;
#X obj 87 105 expr~ $v1 >= 0.5;
#X obj 48 207 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 48 185 metro 170;
#X obj 48 243 spigot;
#X obj 87 208 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 14 140 loadbang;
#X obj 48 164 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 54 305 *;
#X obj 130 246 r~ not_adjusting;
#X floatatom 130 312 5 0 0 0 - - -, f 5;
#X obj 130 290 sig2num~;
#X obj 88 77 lop~ 5;
#X obj 178 356 r angle2goal;
#X obj 178 393 expr if($f1 < 10 \, if($f1 > -10 \, 1 \, 0) \, 0);
#X obj 49 385 *;
#X connect 0 0 9 0;
#X connect 0 0 14 0;
#X connect 2 0 0 0;
#X connect 2 0 8 0;
#X connect 3 0 6 0;
#X connect 4 0 3 0;
#X connect 6 0 2 0;
#X connect 7 0 21 0;
#X connect 10 0 2 0;
#X connect 11 0 13 0;
#X connect 12 0 11 0;
#X connect 13 0 17 0;
#X connect 14 0 13 1;
#X connect 15 0 16 0;
#X connect 16 0 12 0;
#X connect 17 0 24 0;
#X connect 18 0 20 0;
#X connect 20 0 17 1;
#X connect 20 0 19 0;
#X connect 21 0 10 0;
#X connect 22 0 23 0;
#X connect 23 0 24 1;
#X connect 24 0 1 0;
#X restore 802 685 pd kick?;
#X obj 606 230 r angle2goal;
#X obj 609 256 abs;
#X obj 559 304 tgl 50 0 empty empty Facing_Goal 17 7 0 10 -262144 -1
-1 0 1;
#X obj 45 348 sig~;
#X obj 342 348 sig~;
#X obj 568 366 sig~;
#X text 609 202 Vision:;
#X text 47 199 IR:;
#X text 352 206 Compass:;
#X obj 771 736 s~ shoot_mode;
#X obj 46 251 < 2;
#X obj 1336 184 r ball_angle;
#X obj 1338 238 abs;
#X obj 1338 260 < 45;
#X obj 1371 289 tgl 50 0 empty empty facing_ball 17 7 0 10 -262144
-1 -1 1 1;
#X obj 1336 377 sig~;
#X obj 611 279 < 25;
#X floatatom 1364 214 5 0 0 0 - - -, f 5;
#X floatatom 107 550 5 0 0 0 - - -, f 5;
#X obj 110 573 hsl 64 15 -35 35 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 5706 1;
#X obj 220 528 < 20;
#X obj 67 601 sig~;
#X obj 56 754 *~;
#X obj 35 882 throw~ steering;
#X obj 222 549 tgl 50 0 empty empty facing_goal 17 7 0 10 -262144 -1
-1 0 1;
#X text 104 487 controlling steering while shooting for the goal.,
f 29;
#X obj 115 674 r~ shoot_mode;
#X obj 74 521 r angle2goal;
#N canvas 374 189 401 248 diy_pwm 0;
#X obj 42 187 outlet~;
#X obj 201 186 outlet~;
#X obj 42 165 expr~ $v1 < $f2;
#X obj 201 164 expr~ $v1 >= $f2;
#X obj 279 25 loadbang;
#X floatatom 279 69 5 0 0 0 - - -, f 5;
#X msg 279 47 0.15;
#X obj 118 50 phasor~ 4;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 4 0 6 0;
#X connect 5 0 2 1;
#X connect 5 0 3 1;
#X connect 6 0 5 0;
#X connect 7 0 2 0;
#X connect 7 0 3 0;
#X restore 140 701 pd diy_pwm;
#X obj 57 781 *~;
#X obj 115 674 r~ shoot_mode;
#X obj 394 895 throw~ throttle;
#X obj 503 715 r way_is_clear;
#X floatatom 251 627 5 0 0 0 - - -, f 5;
#X obj 121 110 tgl 40 0 empty empty SHOOT 35 7 0 30 -262144 -1 -1 0
1;
#X obj 779 51 r compass_heading;
#X obj 960 62 r ball_angle;
#X obj 860 310 wrap;
#X obj 860 259 / 360;
#X obj 860 281 + 0.5;
#X obj 860 354 * 360;
#X obj 860 332 - 0.5;
#X floatatom 860 376 5 0 0 0 - - -, f 5;
#X floatatom 819 149 5 0 0 0 - - -, f 5;
#X floatatom 928 127 5 0 0 0 - - -, f 5;
#X obj 820 177 * -1;
#X obj 864 214 +;
#X obj 864 236 abs;
#X obj 863 447 tgl 40 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 925 175 t b f;
#X floatatom 958 266 5 0 0 0 - - -, f 5;
#X obj 855 408 expr $f1 <= 90 && $f1 >= -90;
#X obj 902 497 s ball_side;
#X obj 841 517 sig~;
#X obj 398 808 expr~ $v1 * $v2 * $f3;
#X floatatom 531 869 5 0 0 0 - - -, f 5;
#X obj 155 809 s~ not_adjusting;
#X obj 305 726 r~ not_adjusting;
#X obj 196 786 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 205 748 sig2num~;
#X obj 634 671 sig2num~;
#X obj 494 837 sig2num~;
#X obj 57 825 sig2num~;
#X floatatom 57 847 5 0 0 0 - - -, f 5;
#X obj 348 594 *~;
#X obj 437 552 loadbang;
#X floatatom 437 596 5 0 0 0 - - -, f 5;
#X obj 67 636 +~;
#X obj 348 616 sig2num~;
#X floatatom 348 638 5 0 0 0 - - -, f 5;
#X obj 320 512 r ball_angle;
#X obj 22 674 sig2num~;
#X floatatom 14 748 5 0 0 0 - - -, f 5;
#X obj 16 703 * 1.2;
#X floatatom 375 541 5 0 0 0 - - -, f 5;
#X obj 319 554 / 180;
#X msg 439 575 20;
#X obj 55 563 / 100;
#X obj 57 803 *~ 0.9;
#X obj 775 649 expr~ $v1 * $v2 * $v3 * $v4 * $v5 * $v6;
#X obj 1178 563 r stuck;
#X obj 1178 585 not;
#X obj 1178 607 sig~;
#X obj 431 710 *~ 0.25;
#X obj 1368 568 r angle2goal;
#X obj 1371 619 / 30;
#X obj 1371 641 sig~;
#X obj 1379 717 throw~ steering;
#X obj 1370 679 *~;
#X obj 1498 586 loadbang;
#X floatatom 1490 668 5 0 0 0 - - -, f 5;
#X msg 1496 632 0.3;
#X obj 1773 601 r way_is_clear;
#X obj 1647 599 r~ shoot_mode;
#X obj 1773 623 sig~;
#X obj 1703 684 *~;
#X obj 1582 638 loadbang;
#X floatatom 1583 696 5 0 0 0 - - -, f 5;
#X msg 1583 666 0.5;
#X obj 1683 761 *~;
#X obj 1687 798 throw~ throttle;
#X connect 0 0 10 0;
#X connect 1 0 17 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 11 0;
#X connect 7 0 8 0;
#X connect 8 0 23 0;
#X connect 9 0 12 0;
#X connect 10 0 86 0;
#X connect 11 0 86 1;
#X connect 12 0 86 2;
#X connect 17 0 0 0;
#X connect 18 0 24 0;
#X connect 18 0 19 0;
#X connect 19 0 20 0;
#X connect 20 0 21 0;
#X connect 20 0 22 0;
#X connect 22 0 86 4;
#X connect 23 0 9 0;
#X connect 25 0 26 0;
#X connect 27 0 31 0;
#X connect 28 0 74 0;
#X connect 29 0 36 0;
#X connect 31 0 40 0;
#X connect 33 0 29 1;
#X connect 33 0 90 0;
#X connect 34 0 27 0;
#X connect 34 0 25 0;
#X connect 34 0 84 0;
#X connect 35 0 36 1;
#X connect 35 1 63 0;
#X connect 35 1 66 0;
#X connect 36 0 85 0;
#X connect 39 0 61 2;
#X connect 42 0 50 0;
#X connect 43 0 51 0;
#X connect 44 0 48 0;
#X connect 45 0 46 0;
#X connect 46 0 44 0;
#X connect 47 0 49 0;
#X connect 48 0 47 0;
#X connect 49 0 58 0;
#X connect 50 0 52 0;
#X connect 51 0 56 0;
#X connect 52 0 53 0;
#X connect 53 0 54 0;
#X connect 54 0 57 0;
#X connect 54 0 45 0;
#X connect 55 0 59 0;
#X connect 55 0 60 0;
#X connect 56 0 53 0;
#X connect 56 1 53 1;
#X connect 58 0 55 0;
#X connect 60 0 86 3;
#X connect 61 0 68 0;
#X connect 64 0 61 0;
#X connect 66 0 65 0;
#X connect 67 0 41 0;
#X connect 68 0 62 0;
#X connect 69 0 70 0;
#X connect 71 0 75 0;
#X connect 71 0 74 1;
#X connect 72 0 83 0;
#X connect 73 0 71 1;
#X connect 74 0 29 0;
#X connect 74 0 78 0;
#X connect 75 0 76 0;
#X connect 77 0 81 0;
#X connect 77 0 82 0;
#X connect 78 0 80 0;
#X connect 80 0 79 0;
#X connect 82 0 71 0;
#X connect 83 0 73 0;
#X connect 84 0 28 0;
#X connect 85 0 69 0;
#X connect 86 0 6 0;
#X connect 86 0 16 0;
#X connect 86 0 67 0;
#X connect 87 0 88 0;
#X connect 88 0 89 0;
#X connect 89 0 86 5;
#X connect 90 0 61 1;
#X connect 91 0 92 0;
#X connect 92 0 93 0;
#X connect 93 0 95 0;
#X connect 95 0 94 0;
#X connect 96 0 98 0;
#X connect 97 0 95 1;
#X connect 98 0 97 0;
#X connect 99 0 101 0;
#X connect 100 0 102 0;
#X connect 101 0 102 1;
#X connect 102 0 106 0;
#X connect 103 0 105 0;
#X connect 104 0 106 1;
#X connect 105 0 104 0;
#X connect 106 0 107 0;
#X coords 0 -1 1 1 85 60 1 100 100;
#X restore 575 108 pd shoot;
#X text 575 38 Shoot Mode: Active when ball is directly between the
robot and the goal Drives forward to attempt to score a goal, f 30
;
#X text 310 31 Aim Mode: Active when the ball is between us and the
target goal. Purpose of this mode is to line up with the ball so that
we are ready to shoot (and score hopefully), f 35;
#X text 17 20 Seek Mode: Active when the ball is NOT between us and
the target goal Purpose is to get on the other (correct) side of the
ball (i.e. so the ball is between us and the target goal. This mode
also avoids the ball so that we don't score own goals :P, f 39;
#X obj 367 262 r ball_angle;
#X floatatom 367 284 5 0 0 0 - - -, f 5;
#X obj 819 266 r angle2goal;
#X floatatom 819 288 5 0 0 0 - - -, f 5;
#X obj 690 266 r compass_heading;
#X floatatom 690 292 5 0 0 0 - - -, f 5;
#X obj 588 264 r ball_side;
#X obj 588 290 tgl 40 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 245 261 r ball_detected;
#X obj 245 285 tgl 40 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 250 439 expr $f1 == 0 || $f1 >= 10;
#X obj 470 235 r ball_distance;
#X obj 470 287 moses 0.01;
#X obj 470 309 sig~;
#X obj 470 331 lop~ 1;
#X obj 331 316 hsl 128 15 -180 180 0 0 empty empty empty -2 -8 0 10
-262144 -1 -1 6350 1;
#X floatatom 290 415 5 0 0 0 - - -, f 5;
#X obj 447 717 r way_is_clear;
#X obj 447 740 not;
#X obj 446 796 bang;
#X obj 430 942 throw~ throttle;
#X obj 447 821 delay 5000;
#X obj 555 800 r way_is_clear;
#X obj 348 822 delay 1000;
#X msg 354 857 0;
#X msg 558 846 stop;
#X obj 461 902 sig~;
#X msg 448 850 -0.75;
#X text 558 693 drive backwards if the robot is stuck for 5 seconds
, f 18;
#X obj 394 786 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 314 822 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 401 722 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 447 762 change;
#N canvas 463 299 773 515 stuck 0;
#X obj 110 120 tgl 30 0 empty stuck stuck 17 7 0 10 -262144 -1 -1 0
1;
#X obj 428 162 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 353 121 moses 1;
#X msg 305 163 stop;
#X msg 351 164 0;
#X obj 437 311 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 365 184 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 428 224 spigot;
#X obj 506 204 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 534 173 loadbang;
#X obj 428 246 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 483 175 0;
#X msg 386 164 1;
#X obj 420 379 s stuck;
#X text 283 348 drive towards heading time:, f 16;
#X text 474 248 time till stuck:;
#X obj 353 75 r way_is_clear;
#X text 344 41 comment, f 12;
#X obj 428 267 delay 5000;
#X msg 428 289 1;
#X obj 570 372 r stuck;
#X obj 570 436 sig~;
#X obj 570 394 * -0.75;
#X floatatom 674 416 5 0 0 0 - - -, f 5;
#X obj 570 458 throw~ throttle;
#X obj 205 353 delay 1500;
#X connect 1 0 7 0;
#X connect 2 0 1 0;
#X connect 2 1 3 0;
#X connect 2 1 4 0;
#X connect 2 1 12 0;
#X connect 3 0 18 0;
#X connect 4 0 6 0;
#X connect 4 0 13 0;
#X connect 7 0 10 0;
#X connect 8 0 7 1;
#X connect 9 0 8 0;
#X connect 10 0 11 0;
#X connect 10 0 18 0;
#X connect 11 0 8 0;
#X connect 12 0 8 0;
#X connect 16 0 2 0;
#X connect 18 0 19 0;
#X connect 18 0 25 0;
#X connect 19 0 5 0;
#X connect 19 0 8 0;
#X connect 19 0 13 0;
#X connect 20 0 22 0;
#X connect 21 0 24 0;
#X connect 22 0 23 0;
#X connect 22 0 21 0;
#X connect 25 0 4 0;
#X connect 25 0 12 0;
#X connect 25 0 1 0;
#X coords 0 -1 1 1 85 60 1 100 100;
#X restore 912 134 pd stuck;
#X connect 1 0 0 2;
#X connect 2 0 29 0;
#X connect 2 0 35 0;
#X connect 5 0 7 0;
#X connect 6 0 8 0;
#X connect 7 0 6 0;
#X connect 10 0 11 0;
#X connect 12 0 0 0;
#X connect 19 0 20 0;
#X connect 20 0 34 0;
#X connect 21 0 22 0;
#X connect 23 0 24 0;
#X connect 25 0 26 0;
#X connect 27 0 28 0;
#X connect 29 0 10 0;
#X connect 30 0 31 0;
#X connect 31 0 32 0;
#X connect 32 0 33 0;
#X connect 36 0 37 0;
#X connect 37 0 51 0;
#X connect 38 0 40 0;
#X connect 38 0 50 0;
#X connect 40 0 46 0;
#X connect 40 0 42 0;
#X connect 40 0 48 0;
#X connect 41 0 44 0;
#X connect 42 0 43 0;
#X connect 42 0 49 0;
#X connect 43 0 45 0;
#X connect 44 0 40 0;
#X connect 44 0 42 0;
#X connect 45 0 39 0;
#X connect 46 0 45 0;
#X connect 51 0 38 0;
