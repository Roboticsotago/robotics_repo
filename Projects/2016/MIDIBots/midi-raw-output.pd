#N canvas 0 0 1912 1195 10;
#X obj 923 697 list split 1;
#X obj 923 614 until;
#X obj 923 652 list append;
#X obj 949 581 t b l;
#X obj 1093 645 bang;
#X obj 923 744 midiout 1;
#X msg 939 465 144 69 100;
#X text 1016 461 Note on \, pitch 69 \, vel 100;
#X msg 965 495 128 69 100;
#X text 1043 493 Note off \, pitch 69 \, vel 100;
#X text 600 640 List serialisation mechanism from the [list] help.
;
#X text 916 433 How to do raw MIDI in Pd using note message lists \,
CME 2011-08-12:;
#X floatatom 369 348 5 0 0 0 - - -;
#X obj 372 457 phasor~;
#X obj 372 479 *~ 2;
#X obj 372 501 -~ 1;
#X obj 365 404 pack f 20;
#X obj 365 426 line~;
#X obj 408 567 *~;
#X obj 367 656 dac~;
#X floatatom 509 346 5 0 0 0 - - -;
#X obj 509 367 pack f 20;
#X obj 509 389 line~;
#X obj 369 369 mtof;
#X obj 372 523 *~ 1;
#X obj 370 619 *~;
#X obj 578 433 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 578 475 line~;
#X obj 578 453 pack f 200;
#X obj 732 410 spigot;
#X obj 777 375 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 1200 747 ctlout;
#X text 1249 740 My XV-88 keyboard doesn't apply the local sustain
control to remote MIDI notes \, so we'll have to generate sustain control
messages here too.;
#X floatatom 1225 657 5 0 0 0 - - -;
#X obj 1229 600 loadbang;
#X msg 1229 622 64;
#X obj 1178 651 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X obj 1178 671 * 127;
#X obj 1602 416 MIDI/pitch-bend;
#X obj 325 65 *~ 0.2;
#X obj 333 36 osc~ 440;
#X floatatom 334 0 5 0 0 0 - - -;
#X obj 703 507 route 144 128;
#X obj 691 542 print NOTE-ON;
#X obj 749 568 print NOTE-OFF;
#X obj 650 -244 adc~ 7 8 9 10 11 12;
#X text 46 -16 Hmm \, crosstalk is a problem. But \, we can probably
work out some coefficients and subtract the signal from adjacent strings
to yield just the real signal!;
#X obj 414 -135 +~;
#X floatatom 460 -208 5 0 0 0 - - -;
#X obj 444 -156 *~;
#X obj 460 -187 / 1000;
#X obj 1094 -185 +~;
#X floatatom 1123 -263 5 0 0 0 - - -;
#X obj 1107 -211 *~;
#X obj 1123 -242 / 1000;
#X text 290 -245 So \, this has turned into yet another pitch-tracking
test!;
#X text 1370 530 For note output \, it might be sensible to use separate
MIDI channels for each string \, to avoid spurious note-on/note-off
messsages from one string affecting the adjacent ones.;
#X obj 782 317 loadbang;
#X obj 1284 -99 hip~ 100;
#X obj 1284 -77 lop~ 18000;
#X obj 1095 -96 hip~ 100;
#X obj 1095 -74 lop~ 18000;
#X obj 962 -95 hip~ 100;
#X obj 962 -73 lop~ 18000;
#X obj 768 -98 hip~ 100;
#X obj 768 -76 lop~ 18000;
#X obj 607 -101 hip~ 100;
#X obj 607 -79 lop~ 18000;
#X obj 343 -97 hip~ 100;
#X obj 343 -75 lop~ 18000;
#X text 1455 -187 TODO: figure out optimal -npoints from Fs and lowest
note wished to track.;
#X obj 1167 544 ctlin;
#X obj 1167 566 pack f f f;
#X msg 1167 588 \$2 \$1;
#X obj 1167 610 route 64;
#X obj 1752 525 noteout;
#X obj 1752 466 unpack f f;
#X obj 1752 444 route 1;
#X obj 1653 494 print MIDI;
#X obj 1752 414 pack f f f;
#X text 1433 -61 Further preprocessing: perhaps a signal-based noise
gate \, gain and level meter \, compression?;
#X obj 1752 392 poly 6;
#X obj 1523 439 noteout 1;
#X obj 1602 438 bendout 1;
#X floatatom 1606 374 5 0 0 0 - - -;
#X obj 1268 358 MIDI/pitch-bend;
#X obj 1189 381 noteout 1;
#X obj 1268 380 bendout 1;
#X floatatom 1272 316 5 0 0 0 - - -;
#X obj 975 352 MIDI/pitch-bend;
#X obj 896 375 noteout 1;
#X obj 975 374 bendout 1;
#X floatatom 979 310 5 0 0 0 - - -;
#X obj 660 357 MIDI/pitch-bend;
#X obj 581 380 noteout 1;
#X obj 660 379 bendout 1;
#X floatatom 664 315 5 0 0 0 - - -;
#X obj 1453 298 wrap 1;
#X floatatom 1453 320 5 0 0 0 - - -;
#X obj 1982 362 MIDI/pitch-bend;
#X obj 1903 385 noteout 1;
#X obj 1982 384 bendout 1;
#X floatatom 1986 320 5 0 0 0 - - -;
#X obj 259 364 MIDI/pitch-bend;
#X obj 180 387 noteout 1;
#X obj 259 386 bendout 1;
#X floatatom 263 322 5 0 0 0 - - -;
#X obj 1783 95 guitar-synth-element 64 88;
#X obj 1 103 guitar-synth-element 40 64;
#X obj 1453 93 guitar-synth-element 58 83;
#X obj 353 100 guitar-synth-element 45 69;
#X obj 1097 88 guitar-synth-element 55 79;
#X obj 749 82 guitar-synth-element 50 74;
#X connect 0 0 5 0;
#X connect 0 1 2 1;
#X connect 0 2 4 0;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 3 1 2 1;
#X connect 4 0 1 1;
#X connect 6 0 3 0;
#X connect 8 0 3 0;
#X connect 12 0 23 0;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 15 0 24 0;
#X connect 16 0 17 0;
#X connect 17 0 13 0;
#X connect 18 0 25 0;
#X connect 20 0 21 0;
#X connect 21 0 22 0;
#X connect 22 0 18 1;
#X connect 23 0 16 0;
#X connect 24 0 18 0;
#X connect 25 0 19 0;
#X connect 25 0 19 1;
#X connect 26 0 28 0;
#X connect 27 0 25 1;
#X connect 28 0 27 0;
#X connect 29 0 3 0;
#X connect 29 0 42 0;
#X connect 30 0 29 1;
#X connect 33 0 31 1;
#X connect 34 0 35 0;
#X connect 35 0 33 0;
#X connect 36 0 37 0;
#X connect 37 0 31 0;
#X connect 38 0 83 0;
#X connect 40 0 39 0;
#X connect 41 0 40 0;
#X connect 42 0 43 0;
#X connect 42 1 44 0;
#X connect 45 0 47 0;
#X connect 45 0 68 0;
#X connect 45 1 49 0;
#X connect 45 1 66 0;
#X connect 45 2 64 0;
#X connect 45 3 62 0;
#X connect 45 4 53 0;
#X connect 45 4 60 0;
#X connect 45 5 51 1;
#X connect 45 5 58 0;
#X connect 48 0 50 0;
#X connect 49 0 47 1;
#X connect 50 0 49 1;
#X connect 52 0 54 0;
#X connect 53 0 51 1;
#X connect 54 0 53 1;
#X connect 57 0 30 0;
#X connect 58 0 59 0;
#X connect 59 0 107 0;
#X connect 60 0 61 0;
#X connect 61 0 109 0;
#X connect 62 0 63 0;
#X connect 63 0 111 0;
#X connect 64 0 65 0;
#X connect 65 0 112 0;
#X connect 66 0 67 0;
#X connect 67 0 110 0;
#X connect 68 0 69 0;
#X connect 69 0 108 0;
#X connect 71 0 72 0;
#X connect 71 1 72 1;
#X connect 71 2 72 2;
#X connect 72 0 73 0;
#X connect 73 0 74 0;
#X connect 76 0 75 0;
#X connect 76 1 75 1;
#X connect 77 0 76 0;
#X connect 77 0 78 0;
#X connect 79 0 77 0;
#X connect 81 0 79 0;
#X connect 81 1 79 1;
#X connect 81 2 79 2;
#X connect 84 0 82 2;
#X connect 84 0 83 1;
#X connect 85 0 87 0;
#X connect 88 0 86 2;
#X connect 88 0 87 1;
#X connect 89 0 91 0;
#X connect 92 0 90 2;
#X connect 92 0 91 1;
#X connect 93 0 95 0;
#X connect 96 0 94 2;
#X connect 96 0 95 1;
#X connect 97 0 98 0;
#X connect 99 0 101 0;
#X connect 102 0 100 2;
#X connect 102 0 101 1;
#X connect 103 0 105 0;
#X connect 106 0 104 2;
#X connect 106 0 105 1;
#X connect 107 2 100 0;
#X connect 107 3 99 0;
#X connect 108 2 104 0;
#X connect 108 3 103 0;
#X connect 109 0 97 0;
#X connect 109 2 82 0;
#X connect 109 3 38 0;
#X connect 110 2 94 0;
#X connect 110 3 93 0;
#X connect 111 2 86 0;
#X connect 111 3 85 0;
#X connect 112 2 90 0;
#X connect 112 3 89 0;
